<ion-grid
  *ngIf="person && program"
  [class.util--page-margin-horizontal]="addHorizontalMargins"
>
  <ion-row>
    <ion-col
      [size]="12"
      [sizeMd]="5"
      [sizeLg]="4"
    >
      <ion-card>
        <ion-card-header>
          <ion-card-title>Duplicate Registrations</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-grid>
            <ion-row>
              <ion-col>Duplicate Registration ID</ion-col>
              <ion-col>Value</ion-col>
              <ion-col>Attribute Name</ion-col>
              <ion-col>Action</ion-col>
            </ion-row>
            <ng-container *ngFor="let duplicate of duplicates">
              <ion-row>
                <ion-col>
                  <a
                    [href]="
                      'http://localhost:8888/program/' +
                      program.id +
                      '/registration/' +
                      duplicate.duplicateRegistrationProgramId
                    "
                  >
                    {{ duplicate.duplicateRegistrationProgramId }}
                  </a>
                </ion-col>
                <ion-col>{{ duplicate.value }}</ion-col>
                <ion-col>{{ duplicate.name }}</ion-col>
                <ion-col>
                  <ion-button
                    (click)="postUnique(duplicate.duplicateReferenceId)"
                  >
                    Mark as Unique
                  </ion-button>
                </ion-col>
              </ion-row>
            </ng-container>
          </ion-grid>
        </ion-card-content>
      </ion-card>

      <ion-card>
        <ion-card-header>
          <ion-card-title>Fuzzy Duplicate Registrations</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-grid>
            <ion-row>
              <ion-col>Fuzzy Match Score</ion-col>
              <ion-col>Duplicate Registration ID</ion-col>
              <ion-col>Value</ion-col>
              <ion-col>Attribute Name</ion-col>
            </ion-row>
            <ng-container *ngFor="let fuzzyDuplicate of fuzzyDuplicates">
              <ion-row>
                <ion-col>{{ fuzzyDuplicate.fuzzyMatchScore }}</ion-col>
                <ion-col>
                  <a
                    [href]="
                      'http://localhost:8888/program/' +
                      program.id +
                      '/registration/' +
                      fuzzyDuplicate.duplicateRegistrationProgramId
                    "
                  >
                    {{ fuzzyDuplicate.duplicateRegistrationProgramId }}
                  </a>
                </ion-col>
                <ion-col>{{ fuzzyDuplicate.value }}</ion-col>
                <ion-col>{{ fuzzyDuplicate.name }}</ion-col>
              </ion-row>
            </ng-container>
          </ion-grid>
        </ion-card-content>
      </ion-card>

      <app-registration-personal-information
        data-testid="registration-personal-information-data"
        [person]="person"
        [program]="program"
        [lastRegistrationStatusChangeEvent]="lastRegistrationStatusChangeEvent"
        class="ion-margin-bottom"
        style="display: block"
      ></app-registration-personal-information>

      <ng-container
        *ngIf="
          canViewPhysicalCards(person.programId) &&
          fspHasPhysicalCardSupport(person.financialServiceProviderName)
        "
      >
        <div class="ion-margin-vertical ion-padding-vertical">
          <app-registration-physical-card-overview
            [programId]="person.programId"
            [referenceId]="person.referenceId"
            [currency]="program.currency"
            [nrPayments]="person.paymentCount"
            [registrationStatus]="person.status"
          ></app-registration-physical-card-overview>
        </div>
      </ng-container>
    </ion-col>

    <ion-col
      [size]="12"
      [sizeMd]="7"
      [sizeLg]="8"
    >
      <app-registration-activity-overview
        [person]="person"
        [program]="program"
        [events]="events"
      ></app-registration-activity-overview>
    </ion-col>
  </ion-row>
</ion-grid>
